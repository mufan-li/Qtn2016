read_data;
calc_returns;
a0 = ones(12, 1) * 0.01;
% a0 = [-0.7025;
%       -2.8220;
%        4.2185;
%       -8.1733;
%        0.3422;
%        0.8923;
%       -1.2236;
%        0.3529;
%       -0.2983;
%        2.0556;
%       -2.0033;
%       -1.9602;];

% Best from part 2.
% a0 = [-0.0410;
%       -2.5908;
%        2.6407;
%        2.0834;
%        0.0364;
%       -0.1745;
%        0.1438;
%        0.1699;
%       -0.0378;
%        0.5769;
%       -0.5450;
%       -0.5988;];
% a0 = rand(12, 1) * 0.1;
% options = optimoptions('fminunc','GradObj', 'on');
options = optimoptions('fminunc');
fun = part3f(crcc_, croo, croc_, crco, ctvl_, crvp_, roc, ind);
a = fminunc(fun, a0, options);

w2val = w2(a, crcc_, croo, croc_, crco, ctvl_, crvp_);
disp('a: ');
disp(a);
disp('sharpe: ');
disp(sharpe(w2val, roc, ind) * sqrt(252));
output_csv('data_part3.team_A.csv', datetime, w2val, roc);
output_coeff('coeff_part3.team_A.csv', 'b', a);
